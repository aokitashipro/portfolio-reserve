# language: ja
機能: 予約受付期間の設定

  背景:
    前提 管理者としてログインしている
    かつ 店舗設定が存在する

  シナリオ: 予約受付期間を設定できる
    前提 店舗設定ページにアクセスしている
    もし 「最短予約日数」に"1"を入力する
    かつ 「最長予約日数」に"30"を入力する
    かつ "保存"ボタンをクリックする
    ならば 「設定を保存しました」というメッセージが表示される
    かつ データベースの設定が更新されている

  シナリオ: 当日予約を禁止する設定（minAdvanceBookingDays = 1）
    前提 店舗設定で最短予約日数が"1"に設定されている
    もし ユーザーとして予約ページにアクセスする
    ならば カレンダーで当日の日付が選択不可になっている
    かつ 明日以降の日付が選択可能である

  シナリオ: 30日後までの予約のみ受け付ける設定
    前提 店舗設定で最長予約日数が"30"に設定されている
    もし ユーザーとして予約ページにアクセスする
    ならば カレンダーで30日後までの日付が選択可能である
    かつ 31日後以降の日付が選択不可になっている

  シナリオ: 範囲外の日付で予約を試みた場合はエラー
    前提 店舗設定で最短予約日数が"1"、最長予約日数が"30"に設定されている
    もし ユーザーが当日の日付で予約APIを直接呼び出す
    ならば バリデーションエラーが返される
    かつ エラーメッセージに「予約は1日後から30日後まで可能です」と表示される

  シナリオ: 無効な設定値（min > max）を拒否する
    前提 店舗設定ページにアクセスしている
    もし 「最短予約日数」に"30"を入力する
    かつ 「最長予約日数」に"10"を入力する
    かつ "保存"ボタンをクリックする
    ならば バリデーションエラーが表示される
    かつ エラーメッセージに「最短予約日数は最長予約日数より小さい値を設定してください」と表示される

  シナリオ: デフォルト値が正しく設定されている
    前提 新規に店舗設定を作成する
    ならば 最短予約日数のデフォルト値が"0"である
    かつ 最長予約日数のデフォルト値が"90"である
