# 予約システム インフラ環境 ご提案資料

## 目次
1. [必要なサービスとその理由](#必要なサービスとその理由)
2. [自社名義での契約が必要な理由](#自社名義での契約が必要な理由)
3. [海外サービスの安全性について](#海外サービスの安全性について)
4. [国内サービスとの比較](#国内サービスとの比較)
5. [コスト比較](#コスト比較)
6. [メール送信のためのドメイン設定](#メール送信のためのドメイン設定)
7. [セットアップの流れ](#セットアップの流れ)

---

## 必要なサービスとその理由

本予約システムの運用には、以下3つのサービスが必要です。

### VPS（仮想プライベートサーバー）

**役割:**
予約システムのアプリケーション本体を動かすためのサーバーです。

**なぜ必要か:**
- 24時間365日稼働し、お客様からの予約受付を処理します
- 自社で物理サーバーを用意するより圧倒的に低コストで、初期費用も不要です
- 必要に応じてスペックの変更が容易です

**推奨サービス:**
- Hetzner（ドイツ）: 月額 €4.49〜（約700円）
- Vultr（米国・東京リージョンあり）: 月額 $6〜（約900円）
- Contabo（ドイツ）: 月額 €4.99〜（約800円）

### Supabase（データベース）

**役割:**
予約情報、顧客情報などのデータを安全に保管します。

**なぜ必要か:**
- 自動バックアップ機能により、データ損失のリスクを最小化
- VPS内にデータベースを構築する場合、障害時の復旧作業やセキュリティ対策をすべて自社で行う必要がありますが、Supabaseならこれらが自動化されています
- 専門的な知識がなくても、安全にデータを管理できます

**特徴:**
- PostgreSQLベースのオープンソース技術
- 自動バックアップ、自動スケーリング
- リアルタイムデータ同期機能
- 無料プランあり（小規模運用に十分）

### Resend（メール送信サービス）

**役割:**
予約確認メール、リマインダーメールなどを確実に届けます。

**なぜ必要か:**
- VPSから直接メール送信すると、スパム判定されて届かないリスクが高い
- 到達率が高く、送信ログも確認できるため、「メールが届かない」というトラブルを防げます
- 専門的な設定なしで、確実にメールを送信できます

**特徴:**
- 月間1万通まで無料
- 高い到達率（99%以上）
- 送信ログの確認が可能
- SPF/DKIM/DMARC完全対応

---

## 自社名義での契約が必要な理由

### 1. コスト管理の透明性

- 使った分だけの請求が御社に直接届きます
- 中間マージンが発生せず、最も経済的です
- 月々の利用状況を直接確認できます

### 2. データの所有権

- 御社のデータは御社が完全に管理・所有します
- 当社との契約終了後も、システムとデータは御社のものとして残ります
- 第三者にデータが渡ることはありません

### 3. 長期的な運用の自由度

- 将来的に他の開発会社にメンテナンスを依頼する場合も、スムーズに移行できます
- サービスプランの変更や解約も御社の判断で自由に行えます
- ベンダーロックインを避けられます

### 4. セキュリティとコンプライアンス

- 御社の管理下でセキュリティポリシーを適用できます
- 必要に応じて監査証跡を確認できます
- 個人情報保護の観点からも、自社管理が望ましいです

---

## 海外サービスの安全性について

### Supabase

**企業情報:**
- 2020年設立、Y Combinator出身
- オープンソースプロジェクトで透明性が高い
- GitHubスター数: 70,000以上（人気の高さを示す指標）

**セキュリティ認証:**
- ISO 27001認証取得済み
- SOC 2 Type II準拠
- GDPR（EU一般データ保護規則）完全対応
- HIPAA対応可能（医療情報の取り扱い基準）

**インフラ:**
- データはAWS上で管理（世界最大級のクラウドサービス）
- データセンターは選択可能（東京リージョンもあり、日本国内にデータを置けます）
- エンタープライズグレードの暗号化

**採用実績:**
- GitHub、Mozilla、Figma、PwCなど大手企業が利用
- 世界中で100万以上のプロジェクトが稼働中

### Resend

**企業情報:**
- 2022年設立、Y Combinator出身
- メール送信に特化した新興企業
- 開発者向けに設計された使いやすいAPI

**セキュリティとコンプライアンス:**
- GDPRコンプライアンス対応
- SPF/DKIM/DMARC完全対応（なりすまし防止）
- TLS暗号化による通信の保護
- 送信ログの完全な追跡可能性

**採用実績:**
- Vercel、Linear、Cal.com、Raindropなど
- 開発者コミュニティで高い評価

### VPS各サービス

**Hetzner（ドイツ）**
- 1997年創業、25年以上の実績
- ISO 27001認証取得
- ドイツの厳格なデータ保護法に準拠
- 自社データセンター運営で高い信頼性

**Vultr（米国）**
- 2014年創業
- 世界32拠点にデータセンター（東京含む）
- SOC 2準拠
- 99.99%の稼働率保証

**Contabo（ドイツ）**
- 2003年創業、20年以上の実績
- ISO 27001認証取得
- ドイツ・米国にデータセンター
- コストパフォーマンスに優れる

---

## 国内サービスとの比較

### 国内サービスでも同様の構成は可能です

**国内の代替サービス例:**
- VPS: さくらのVPS、ConoHa VPS、カゴヤ・ジャパン
- データベース: さくらのクラウド、AWS RDS（東京リージョン）
- メール送信: SendGrid（国内サポートあり）、Mailgun

### なぜ海外サービスを推奨するのか

**1. コストパフォーマンス**
- 同等のスペックで50-70%程度のコスト
- 長期的な運用コスト削減につながる

**2. 技術的な優位性**
- 最新技術の導入が早い
- APIドキュメントが充実（開発・保守がしやすい）
- 開発者コミュニティが活発で、トラブル時の情報が豊富

**3. 世界標準のサービス**
- グローバル企業が利用している実績
- 技術者の確保が容易（知見のある人が多い）

**4. 日本語サポート**
- Supabaseは日本語ドキュメントあり
- 主要なVPSサービスも日本語対応または英語の管理画面がシンプル
- 初期セットアップは当社が代行するため、言語の壁は問題になりません

### 懸念点への対応

**為替変動リスク:**
- 月額数百円〜数千円の範囲なので、影響は限定的
- 一部のサービスは円建て決済にも対応

**サポート言語:**
- 重要な設定は当社が代行またはサポート
- 日常的な管理は管理画面の操作のみで完結
- 緊急時は当社がサポート（サポート契約がある場合）

**サービス停止リスク:**
- いずれも資金調達済みで、経営基盤が安定
- オープンソース技術ベースのため、最悪の場合も移行可能
- データのエクスポート機能があり、他サービスへの移行も容易

---

## コスト比較

### 推奨構成（海外サービス）

| サービス | プラン | 月額費用 |
|---------|--------|---------|
| VPS（Hetzner/Vultr） | 基本プラン | 700-900円 |
| Supabase | 無料プラン | 0円 |
| Supabase | Proプラン（推奨） | 約3,000円 |
| Resend | 無料プラン（1万通/月） | 0円 |
| **合計（最小構成）** | | **約700-900円** |
| **合計（推奨構成）** | | **約3,700-3,900円** |

※ 為替レートにより変動します（1ドル=150円、1ユーロ=160円で計算）

### 国内サービス構成

| サービス | プラン | 月額費用 |
|---------|--------|---------|
| さくらのVPS | 1GB | 880円 |
| さくらのVPS | 2GB（推奨） | 1,738円 |
| さくらのクラウド（DB） | 基本プラン | 約5,000円 |
| SendGrid | 無料プラン | 0円 |
| **合計（最小構成）** | | **約5,880円** |
| **合計（推奨構成）** | | **約6,738円** |

### フルマネージド構成（Vercel等）

| サービス | プラン | 月額費用 |
|---------|--------|---------|
| Vercel | Pro | 約3,000円 |
| Supabase | Pro | 約3,000円 |
| Resend | 無料 | 0円 |
| **合計** | | **約6,000円** |

※ フルマネージドは設定が簡単ですが、カスタマイズ性に制限があります

### 年間コスト比較

| 構成 | 月額 | 年額 |
|-----|------|------|
| 推奨構成（海外） | 3,700-3,900円 | 44,400-46,800円 |
| 国内サービス | 6,738円 | 80,856円 |
| フルマネージド | 6,000円 | 72,000円 |

**年間で約30,000円以上の差額が発生します**

---

## メール送信のためのドメイン設定

### なぜドメイン設定が必要か

予約確認メールなどを御社のドメイン（例: `noreply@御社名.com`）から送信するためには、送信元認証の設定が必要です。

**メリット:**
- 御社の正式なメールアドレスから送信できます
- スパム判定されにくくなり、メールの到達率が向上します
- 顧客からの信頼性が高まります

**設定しない場合:**
- 共有ドメイン（`@resend.dev`）からの送信になります
- スパムフォルダに入りやすくなります
- 顧客が「怪しいメール」と判断する可能性があります

### 必要な設定作業

**DNS設定の追加**
- 所要時間: 約10-15分
- 作業内容: ドメイン管理画面でレコードを追加
- 作業者: 御社のIT担当者様またはドメイン管理者様

**当社からの提供物:**
- 詳細な設定手順書（画面キャプチャ付き）
- 追加すべきDNSレコード情報
- 設定後の確認サポート

**設定代行オプション:**
- 料金: 15,000円（税別）
- 御社のドメイン管理画面へのアクセス権をご提供いただければ、当社が代行設定いたします

### DNS設定の詳細

Resendでドメインを登録すると、以下のようなDNSレコード情報が発行されます:

**SPFレコード（送信元認証）**
```
タイプ: TXT
ホスト名: @
値: v=spf1 include:resend.com ~all
```

**DKIMレコード（なりすまし防止）**
```
タイプ: TXT
ホスト名: resend._domainkey
値: v=DKIM1; k=rsa; p=MIGfMA0GCS...（個別に発行される長い文字列）
```

**DMARCレコード（推奨）**
```
タイプ: TXT
ホスト名: _dmarc
値: v=DMARC1; p=none; rua=mailto:dmarc@御社ドメイン.com
```

### 設定の流れ

1. **御社ドメインの確認**
   - 予約システムで使用するドメイン名を確認

2. **Resendでドメインを登録**
   - 当社がResend管理画面で御社ドメインを登録
   - DNSレコード情報が自動発行されます

3. **DNSレコード情報のご提供**
   - 設定手順書とともに、追加すべきDNSレコード情報をお送りします

4. **御社側でDNS設定を追加**
   - ドメイン管理画面（お名前.com、ムームードメイン等）にログイン
   - 手順書に従ってDNSレコードを追加

5. **設定の反映待ち**
   - DNS設定の反映には通常24-48時間かかります

6. **認証確認**
   - 当社でドメイン認証を確認
   - テストメールを送信して動作確認

7. **本番運用開始**

### よくある質問

**Q: 既存のメール送信に影響はありますか？**  
A: ありません。現在使用中のメールサーバー（Outlook、Gmail等）の設定はそのまま継続して使用できます。今回追加する設定は、予約システム専用の送信設定です。

**Q: 設定を間違えるとどうなりますか？**  
A: 予約システムからのメールが送信できなくなるだけで、既存のメールシステムやウェブサイトへの影響はありません。また、設定内容は何度でも修正可能です。

**Q: 自社で設定が難しい場合は？**  
A: 設定代行サービス（15,000円）をご利用いただくか、御社のドメイン管理会社に設定代行を依頼することも可能です。

**Q: ドメインを持っていない場合は？**  
A: 新規でドメインを取得していただくか、当社が用意する共有ドメインを使用することも可能です（ただし、信頼性は劣ります）。

**Q: サブドメインでも大丈夫ですか？**  
A: はい。例えば `mail.御社名.com` や `reserve.御社名.com` などのサブドメインでも問題ありません。むしろ、メインドメインへの影響を避けたい場合はサブドメインを推奨します。

### 代替案

**1. Resendの共有ドメインを使用**
```
送信元: noreply@resend.dev
```
- メリット: DNS設定不要、即日利用可能
- デメリット: 信頼性が劣る、スパム判定されやすい
- 推奨度: △（小規模運用・テスト環境のみ）

**2. サブドメインを新規取得**
```
送信元: noreply@mail.御社名.com
```
- メリット: メインドメインへの影響なし
- デメリット: サブドメインの管理が必要
- 推奨度: ○（メインドメインの設定変更を避けたい場合）

**3. 独自のメール専用ドメインを取得**
```
送信元: noreply@御社名-mail.com
```
- メリット: 完全に独立した管理
- デメリット: 新規ドメイン取得費用（年間1,000円程度）
- 推奨度: ○（将来的に複数システムで利用予定の場合）

---

## セットアップの流れ

### 全体スケジュール

| ステップ | 作業内容 | 所要時間 | 担当 |
|---------|---------|---------|------|
| 1. サービス契約 | VPS/Supabase/Resendの契約 | 1-2時間 | 御社 |
| 2. アクセス権限の提供 | ログイン情報または招待 | 30分 | 御社 |
| 3. 環境構築 | サーバー設定、DB構築 | 2-3日 | 当社 |
| 4. DNS設定 | ドメイン認証設定 | 1日-3日 | 御社 |
| 5. アプリケーション導入 | システムのデプロイ | 1-2日 | 当社 |
| 6. 動作確認 | テスト・修正 | 2-3日 | 当社・御社 |
| 7. 本番稼働 | システム公開 | - | - |

**合計: 約7-14日**

### ステップ1: サービス契約（御社作業）

以下の3つのサービスに御社名義でご登録ください。

#### VPS（推奨: Vultr）

1. https://www.vultr.com/ にアクセス
2. 「Sign Up」からアカウント作成
3. プランを選択:
   - Location: Tokyo（東京）
   - Server Type: Cloud Compute
   - CPU: 1 vCPU
   - RAM: 2GB
   - Storage: 50GB SSD
   - 月額: 約$12（約1,800円）
4. 支払い情報を登録（クレジットカード）

#### Supabase

1. https://supabase.com/ にアクセス
2. 「Start your project」からサインアップ
3. GitHubアカウントでログイン推奨
4. プロジェクトを作成:
   - Organization名: 御社名
   - Project名: 予約システム（任意）
   - Database Password: 安全なパスワードを設定
   - Region: Northeast Asia (Tokyo)
5. 無料プランで開始（後でアップグレード可能）

#### Resend

1. https://resend.com/ にアクセス
2. 「Get Started」からサインアップ
3. GitHubアカウントでログイン推奨
4. API Keyを生成（後で使用）
5. 無料プランで開始

### ステップ2: アクセス権限の提供（御社作業）

**推奨方法: メンバー招待**

各サービスで当社のメールアドレスをメンバーとして招待:
- 当社メールアドレス: [your-email@example.com]
- 権限レベル: 管理者または開発者

**代替方法: 一時的なログイン情報共有**

セキュアな方法（パスワード管理ツール等）で共有:
1. VPSのルートパスワードまたはSSH鍵
2. SupabaseのプロジェクトURL・API Key
3. ResendのAPI Key

**重要:** 設定完了後、パスワードを変更していただくことを推奨します

### ステップ3: 環境構築（当社作業）

当社が以下の作業を実施します:

**VPS設定:**
- OSのセットアップ（Ubuntu推奨）
- セキュリティ設定（ファイアウォール、SSH設定）
- Node.js環境の構築
- SSL証明書の設定（Let's Encrypt）

**Supabase設定:**
- データベーススキーマの作成
- テーブル・関数の設定
- Row Level Security（RLS）の設定
- API認証設定

**Resend設定:**
- ドメイン登録準備
- メールテンプレートの設定

### ステップ4: DNS設定（御社作業）

当社から提供されるDNSレコード情報をドメイン管理画面で追加:

**詳細は「メール送信のためのドメイン設定」セクションを参照**

### ステップ5: アプリケーション導入（当社作業）

- システムファイルのデプロイ
- 環境変数の設定
- 自動起動の設定
- 監視設定

### ステップ6: 動作確認（当社・御社共同作業）

**当社による確認:**
- 予約機能のテスト
- メール送信のテスト
- 管理画面の動作確認
- パフォーマンステスト

**御社による確認:**
- 実際の業務フローでのテスト
- スタッフへの操作説明
- 要望事項の確認

**修正対応:**
- 発見された問題の修正
- 調整・カスタマイズ

### ステップ7: 本番稼働

- 本番環境への切り替え
- 顧客への告知
- 運用開始

---

## サポート体制

### 初期セットアップサポート

**含まれる内容:**
- 全サービスの設定代行または設定支援
- DNS設定のサポート
- 動作確認・テスト
- スタッフへの操作説明（1回、2時間まで）

**期間:**
- 契約から本番稼働まで

### 運用サポート（オプション）

**ベーシックプラン: 月額10,000円**
- メールサポート（平日10:00-18:00、回答24時間以内）
- システムアップデート（月1回）
- バックアップ確認（週1回）

**スタンダードプラン: 月額30,000円**
- メール・チャットサポート（平日10:00-18:00、回答3時間以内）
- システムアップデート（随時）
- バックアップ確認（毎日）
- 簡易なカスタマイズ対応（月5時間まで）

**プレミアムプラン: 月額50,000円**
- 24時間365日サポート（緊急時電話対応可）
- システムアップデート（随時）
- バックアップ確認（毎日）
- カスタマイズ対応（月10時間まで）
- 定期訪問（3ヶ月に1回）

### 緊急対応

**システム障害時:**
- 初動対応: 1時間以内（プレミアムプラン）
- 初動対応: 3時間以内（スタンダードプラン）
- 初動対応: 24時間以内（ベーシックプラン）

---

## ご契約までの流れ

1. **ご提案内容の確認・ご質問**
   - 本資料の内容についてご不明点をご確認ください

2. **お見積もりのご提示**
   - システム開発費
   - 初期設定費
   - サポートプラン（オプション）

3. **ご契約**
   - 契約書の締結
   - 着手金のお支払い

4. **サービス契約**
   - 御社にてVPS/Supabase/Resendをご契約

5. **開発・セットアップ開始**

6. **納品・本番稼働**

7. **残金のお支払い**

---

## よくあるご質問

### 契約・費用について

**Q: 初期費用はいくらかかりますか？**  
A: システム開発費と初期設定費が必要です。具体的な金額は別途お見積もりいたします。インフラ費用（VPS等）は御社が直接各サービスにお支払いいただくため、当社への支払いには含まれません。

**Q: 月々のランニングコストはいくらですか？**  
A: 推奨構成で月額約3,700-3,900円です。これに加えて、サポートプランをご契約いただく場合は別途月額費用が発生します。

**Q: 支払い方法は？**  
A: 各インフラサービスはクレジットカード払いが一般的です。当社への開発費用は銀行振込でお願いしております。

### 技術・運用について

**Q: 自社にIT担当者がいませんが大丈夫ですか？**  
A: はい、問題ありません。初期設定は当社が代行し、運用サポートプランをご契約いただければ、日常的な管理も当社がサポートいたします。

**Q: 将来的にカスタマイズは可能ですか？**  
A: はい、可能です。システムのソースコードはお渡しするため、当社または他社にカスタマイズを依頼できます。

**Q: データのバックアップは取られますか？**  
A: Supabaseは自動バックアップ機能があり、7日分のバックアップが保持されます。VPSについても定期バックアップの設定を行います。

**Q: システム障害が起きた場合は？**  
A: サポートプランをご契約いただいている場合、プランに応じて対応いたします。障害の内容によってはインフラサービス側の問題の場合もあり、その場合は各サービスのサポートに問い合わせが必要です。

### セキュリティについて

**Q: 個人情報は安全に管理されますか？**  
A: はい。Supabaseは暗号化通信、データベース暗号化、アクセス制御などのセキュリティ対策が施されています。また、システム側でも適切なセキュリティ設計を行います。

**Q: SSL証明書は設定されますか？**  
A: はい。Let's Encryptによる無料SSL証明書を設定し、HTTPS通信を実現します。

**Q: 定期的なセキュリティアップデートは？**  
A: サポートプランをご契約いただいている場合、定期的にシステムアップデートを実施します。

### その他

**Q: 契約期間の縛りはありますか？**  
A: インフラサービスは月単位での契約が一般的で、長期契約の縛りはありません。サポートプランも同様です。

**Q: 他のシステムとの連携は可能ですか？**  
A: API連携などにより可能です。具体的な要件をお聞かせいただければ、実現可能性を検討いたします。

**Q: スマートフォンからも利用できますか？**  
A: はい。レスポンシブデザインで構築するため、PC、タブレット、スマートフォンから利用可能です。

---

## お問い合わせ

ご不明な点がございましたら、お気軽にお問い合わせください。

**担当者:** [お名前]  
**メール:** [your-email@example.com]  
**電話:** [000-0000-0000]  
**営業時間:** 平日 10:00-18:00

---

## 付録: DNS設定手順書（サンプル）

### お名前.comでの設定例

1. お名前.com Naviにログイン
2. 「DNS設定/転送設定」をクリック
3. 対象ドメインを選択
4. 「DNSレコード設定を利用する」をクリック
5. 「設定する」ボタンをクリック

**SPFレコードの追加:**
- TYPE: TXT
- ホスト名: （空欄）
- VALUE: `v=spf1 include:resend.com ~all`
- TTL: 3600

**DKIMレコードの追加:**
- TYPE: TXT
- ホスト名: `resend._domainkey`
- VALUE: `v=DKIM1; k=rsa; p=MIGfMA0GCS...`（当社から提供された値）
- TTL: 3600

6. 「追加」ボタンをクリック
7. 「確認画面へ進む」→「設定する」

### ムームードメインでの設定例

1. ムームードメインのコントロールパネルにログイン
2. 「ドメイン管理」→「ムームーDNS」
3. 対象ドメインの「変更」をクリック
4. 「カスタム設定」をクリック

**SPFレコードの追加:**
- サブドメイン: （空欄）
- 種別: TXT
- 内容: `v=spf1 include:resend.com ~all`

**DKIMレコードの追加:**
- サブドメイン: `resend._domainkey`
- 種別: TXT
- 内容: `v=DKIM1; k=rsa; p=MIGfMA0GCS...`（当社から提供された値）

5. 「セットアップ情報変更」をクリック

---

*本資料の内容は予告なく変更される場合がございます。最新の情報は各サービスの公式サイトをご確認ください。*

*最終更新: 2026年1月2日*