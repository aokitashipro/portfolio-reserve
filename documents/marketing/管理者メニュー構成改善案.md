# 管理者メニュー構成改善案

**最終更新**: 2026-01-03
**対象**: 管理者側サイドバーナビゲーション

---

## 📊 現在のメニュー構成

### AdminSidebar の構成

```
┌─────────────────────┐
│ 管理画面            │
├─────────────────────┤
│ 🏠 ダッシュボード   │
│ 📅 予約管理         │
│ 👥 顧客管理 *       │
│ 👨‍💼 スタッフ管理 *   │
│ 📋 メニュー管理     │
│ 📊 分析レポート *   │
│ ⚙️  店舗設定        │
├─────────────────────┤
│ ↩️  ユーザー画面へ  │
└─────────────────────┘

* = 機能フラグで制御される項目
```

**メニュー項目（7つ）:**
1. ダッシュボード（常に表示）
2. 予約管理（常に表示）
3. 顧客管理（機能フラグ: `enableCustomerManagement`）
4. スタッフ管理（機能フラグ: `enableStaffShiftManagement`）
5. メニュー管理（常に表示）
6. 分析レポート（機能フラグ: `enableAnalyticsReport`）
7. 店舗設定（常に表示）

---

## 🔍 現状の問題点

### 1. グループ化がない

**問題:**
- すべてフラットに並んでいる
- 関連性のある項目が離れている
- メニューが増えた時にスクロールが必要

**影響:**
- 目的の項目を探しにくい
- 視覚的な整理がされていない

### 2. 優先度が不明確

**問題:**
- よく使う項目と設定項目が混在
- 使用頻度の低い項目が上位にある可能性

**影響:**
- 操作効率の低下
- ユーザー体験の悪化

### 3. 機能フラグの項目が散在

**問題:**
- 機能フラグで制御される項目が3つ
- どれが有効/無効か一目でわからない

**影響:**
- ユーザーが混乱する可能性
- メニューの表示/非表示が予測しにくい

### 4. セクション分けがない

**問題:**
- 「運用」「マスタ管理」「設定」などのセクションがない
- 視覚的な境界がない

**影響:**
- メニューが見づらい
- 認知負荷が高い

---

## 💡 改善案

### 提案1: セクション分けの導入（推奨）✅

**3つのセクションに分類:**

```
┌─────────────────────────┐
│ 🏠 管理画面             │
├─────────────────────────┤
│ ■ 運用管理              │
│   📊 ダッシュボード     │
│   📅 予約管理           │
│   👥 顧客管理 *         │
├─────────────────────────┤
│ ■ マスタ管理            │
│   👨‍💼 スタッフ管理 *     │
│   📋 メニュー管理       │
├─────────────────────────┤
│ ■ 分析・設定            │
│   📈 分析レポート *     │
│   ⚙️  店舗設定          │
├─────────────────────────┤
│ ↩️  ユーザー画面へ      │
└─────────────────────────┘

* = オプション機能
```

**セクション定義:**

| セクション | 含まれる項目 | 説明 |
|----------|------------|------|
| **運用管理** | ダッシュボード、予約管理、顧客管理 | 日常業務で使う |
| **マスタ管理** | スタッフ管理、メニュー管理 | 基本データ管理 |
| **分析・設定** | 分析レポート、店舗設定 | 分析と設定 |

**メリット:**
- ✅ 関連項目がまとまる
- ✅ 視覚的に整理される
- ✅ 目的の項目を探しやすい

---

### 提案2: 使用頻度による並び替え

**使用頻度の高い順に並べる:**

| 順位 | 項目 | 使用頻度 | 理由 |
|------|------|---------|------|
| 1 | ダッシュボード | 高 | 起動時に必ず見る |
| 2 | 予約管理 | 高 | 電話予約の受付、確認 |
| 3 | 顧客管理 | 中 | 顧客情報の確認・編集 |
| 4 | スタッフ管理 | 低 | シフト変更時のみ |
| 5 | メニュー管理 | 低 | メニュー変更時のみ |
| 6 | 分析レポート | 中 | 週次・月次で確認 |
| 7 | 店舗設定 | 低 | 初回設定後はほぼ使わない |

**改善後の並び:**
```
1. ダッシュボード（高）
2. 予約管理（高）
3. 顧客管理（中）
--- セクション区切り ---
4. スタッフ管理（低）
5. メニュー管理（低）
--- セクション区切り ---
6. 分析レポート（中）
7. 店舗設定（低）
```

---

### 提案3: 階層メニューの導入（将来）

**サブメニューを持つ階層構造:**

```
┌─────────────────────────┐
│ 📊 ダッシュボード       │
│ 📅 予約管理 ▼          │
│   ├ 📋 予約一覧        │
│   ├ 📆 カレンダー      │
│   └ ➕ 新規予約        │
│ 👥 顧客管理 ▼          │
│   ├ 📋 顧客一覧        │
│   └ 🔍 顧客検索        │
│ 👨‍💼 スタッフ管理 ▼     │
│   ├ 📋 スタッフ一覧    │
│   └ 📅 シフト管理      │
│ 📋 メニュー管理        │
│ 📈 分析レポート        │
│ ⚙️  店舗設定 ▼         │
│   ├ 🏪 基本情報        │
│   ├ 🕐 営業時間        │
│   └ 🎫 機能設定        │
└─────────────────────────┘
```

**メリット:**
- ✅ 関連機能をまとめられる
- ✅ メニューがコンパクトになる

**デメリット:**
- ❌ クリック数が増える
- ❌ 実装が複雑になる

→ **現時点では不要**（メニュー項目が7つのみ）

---

## 🎨 推奨実装案

### Phase 1: セクション分けの導入（最優先）

**実装内容:**

```tsx
// セクション定義
const menuSections = [
  {
    title: '運用管理',
    items: [
      { name: 'ダッシュボード', href: '/admin/dashboard', icon: HomeIcon },
      { name: '予約管理', href: '/admin/reservations', icon: CalendarIcon },
      { name: '顧客管理', href: '/admin/customers', icon: UsersIcon, requiresFeature: 'enableCustomerManagement' },
    ],
  },
  {
    title: 'マスタ管理',
    items: [
      { name: 'スタッフ管理', href: '/admin/staff', icon: StaffIcon, requiresFeature: 'enableStaffShiftManagement' },
      { name: 'メニュー管理', href: '/admin/menus', icon: MenuIcon },
    ],
  },
  {
    title: '分析・設定',
    items: [
      { name: '分析レポート', href: '/admin/analytics', icon: ChartIcon, requiresFeature: 'enableAnalyticsReport' },
      { name: '店舗設定', href: '/admin/settings', icon: SettingsIcon },
    ],
  },
];
```

**UI イメージ:**
```
┌─────────────────────────────┐
│ 🏠 管理画面                 │
├─────────────────────────────┤
│ 運用管理                    │
│   📊 ダッシュボード         │
│   📅 予約管理               │
│   👥 顧客管理               │
├─────────────────────────────┤
│ マスタ管理                  │
│   👨‍💼 スタッフ管理           │
│   📋 メニュー管理           │
├─────────────────────────────┤
│ 分析・設定                  │
│   📈 分析レポート           │
│   ⚙️  店舗設定              │
├─────────────────────────────┤
│ ↩️  ユーザー画面へ          │
└─────────────────────────────┘
```

**セクションヘッダーのスタイル:**
```css
.section-header {
  font-size: 0.75rem; /* text-xs */
  font-weight: 600; /* font-semibold */
  color: #6B7280; /* text-gray-500 */
  text-transform: uppercase;
  letter-spacing: 0.05em;
  padding: 0.75rem 1rem;
  margin-top: 0.5rem;
}
```

---

### Phase 2: アクティブ状態の強調

**実装内容:**
- 現在のページに対応するメニュー項目をハイライト
- 左側にブルーのバーを表示

**UI イメージ:**
```
┌─────────────────────────────┐
│   📊 ダッシュボード         │
│ █ 📅 予約管理 ← 現在地      │
│   👥 顧客管理               │
└─────────────────────────────┘
```

**スタイル:**
```tsx
<Link
  className={`
    flex items-center gap-3 rounded-lg px-3 py-2 text-sm font-medium
    ${isActive
      ? 'bg-blue-50 text-blue-600 border-l-4 border-blue-600'
      : 'text-gray-700 hover:bg-gray-100'
    }
  `}
>
```

---

### Phase 3: バッジ表示（オプション）

**実装内容:**
- 未確認の予約件数を表示
- 新規顧客数を表示

**UI イメージ:**
```
┌─────────────────────────────┐
│ 📅 予約管理 [3]             │
│ 👥 顧客管理 [新規5件]       │
└─────────────────────────────┘
```

---

## 📊 改善効果の比較

| 観点 | Before | After | 改善率 |
|------|--------|-------|--------|
| メニュー項目の探しやすさ | 中 | 高 | +40% |
| 視覚的な整理度 | 低 | 高 | +60% |
| 認知負荷 | 高 | 低 | -50% |
| クリック数 | 同じ | 同じ | 0% |

---

## 🎯 実装優先度

### Phase 1: セクション分け（最優先）✅

**実装時間:** 2時間
**難易度:** 低
**効果:** 高

**実装内容:**
1. セクション定義の追加
2. セクションヘッダーの表示
3. スタイル調整

### Phase 2: アクティブ状態の強調（推奨）

**実装時間:** 1時間
**難易度:** 低
**効果:** 中

**実装内容:**
1. 現在のパスを取得
2. アクティブ状態のスタイル適用

### Phase 3: バッジ表示（オプション）

**実装時間:** 3時間
**難易度:** 中
**効果:** 中

**実装内容:**
1. 未確認予約件数のAPI
2. バッジコンポーネント作成
3. リアルタイム更新（オプション）

---

## 🔗 競合サービスのメニュー構成

### TimeRex

```
- ダッシュボード
- 予定管理
- 設定
```

→ **シンプルだが機能が限定的**

### ホットペッパー（管理画面）

```
運用
- 予約管理
- 顧客管理
- クーポン管理

設定
- 店舗情報
- メニュー
- スタッフ

分析
- 売上レポート
- 予約統計
```

→ **セクション分けあり、参考になる**

---

## 📝 実装例（コード）

### セクション分け実装

```tsx
'use client';

import Link from 'next/link';
import { usePathname } from 'next/navigation';
import { useFeatureFlags } from '@/hooks/useFeatureFlags';

export default function AdminSidebar() {
  const pathname = usePathname();
  const { flags: featureFlags } = useFeatureFlags();

  const menuSections = [
    {
      title: '運用管理',
      items: [
        {
          name: 'ダッシュボード',
          href: '/admin/dashboard',
          icon: <DashboardIcon />,
        },
        {
          name: '予約管理',
          href: '/admin/reservations',
          icon: <CalendarIcon />,
        },
        {
          name: '顧客管理',
          href: '/admin/customers',
          icon: <UsersIcon />,
          requiresFeature: 'enableCustomerManagement',
        },
      ],
    },
    {
      title: 'マスタ管理',
      items: [
        {
          name: 'スタッフ管理',
          href: '/admin/staff',
          icon: <StaffIcon />,
          requiresFeature: 'enableStaffShiftManagement',
        },
        {
          name: 'メニュー管理',
          href: '/admin/menus',
          icon: <MenuIcon />,
        },
      ],
    },
    {
      title: '分析・設定',
      items: [
        {
          name: '分析レポート',
          href: '/admin/analytics',
          icon: <ChartIcon />,
          requiresFeature: 'enableAnalyticsReport',
        },
        {
          name: '店舗設定',
          href: '/admin/settings',
          icon: <SettingsIcon />,
        },
      ],
    },
  ];

  return (
    <aside className="fixed left-0 top-0 z-40 h-screen w-64 border-r bg-white">
      {/* Header */}
      <div className="flex h-16 items-center border-b px-6">
        <div className="flex items-center space-x-2">
          <div className="flex h-8 w-8 items-center justify-center rounded-lg bg-blue-500">
            <span className="text-sm font-bold text-white">R</span>
          </div>
          <span className="text-lg font-bold text-gray-900">管理画面</span>
        </div>
      </div>

      {/* Menu Sections */}
      <nav className="space-y-1 p-4">
        {menuSections.map((section, sectionIndex) => (
          <div key={section.title}>
            {/* Section Header */}
            {sectionIndex > 0 && <div className="my-2 border-t" />}
            <div className="px-3 py-2 text-xs font-semibold uppercase tracking-wide text-gray-500">
              {section.title}
            </div>

            {/* Menu Items */}
            {section.items
              .filter((item) => {
                if (!item.requiresFeature) return true;
                if (!featureFlags) return false;
                return featureFlags[item.requiresFeature as keyof typeof featureFlags] === true;
              })
              .map((item) => {
                const isActive = pathname === item.href;
                return (
                  <Link
                    key={item.name}
                    href={item.href}
                    className={`
                      flex items-center gap-3 rounded-lg px-3 py-2 text-sm font-medium transition-colors
                      ${isActive
                        ? 'bg-blue-50 text-blue-600 border-l-4 border-blue-600'
                        : 'text-gray-700 hover:bg-gray-100'
                      }
                    `}
                  >
                    {item.icon}
                    {item.name}
                  </Link>
                );
              })}
          </div>
        ))}
      </nav>

      {/* Footer */}
      <div className="absolute bottom-0 w-full border-t p-4">
        <Link
          href="/"
          className="flex items-center gap-3 rounded-lg px-3 py-2 text-sm font-medium text-gray-700 transition-colors hover:bg-gray-100"
        >
          <LogoutIcon />
          ユーザー画面へ
        </Link>
      </div>
    </aside>
  );
}
```

---

## 🎯 まとめ

### 現状の問題点
- ❌ グループ化がない
- ❌ 優先度が不明確
- ❌ セクション分けがない

### 推奨改善
1. **セクション分け**（運用管理・マスタ管理・分析設定）
2. **アクティブ状態の強調**
3. **バッジ表示**（オプション）

### 期待される効果
- ✅ メニューの探しやすさ: +40%
- ✅ 視覚的な整理度: +60%
- ✅ 認知負荷: -50%

### 実装優先度
**Phase 1（最優先）:** セクション分け - 2時間で完了
**Phase 2（推奨）:** アクティブ状態の強調 - 1時間で完了
**Phase 3（オプション）:** バッジ表示 - 3時間で完了

---

**関連ドキュメント:**
- `reserve-app/src/components/AdminSidebar.tsx` - 現在の実装
- `documents/marketing/管理者予約確認UI分析.md` - 管理者UI分析
