# ãƒ«ãƒ¼ãƒˆè¨­è¨ˆæ›¸ - ãƒ¬ã‚¹ãƒˆãƒ©ãƒ³äºˆç´„ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ 

**ä½œæˆæ—¥**: 2026-01-01
**ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ**: ãƒ¬ã‚¹ãƒˆãƒ©ãƒ³äºˆç´„ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ 
**ãƒãƒ¼ã‚¸ãƒ§ãƒ³**: 1.0.0
**ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯**: Next.js 16 App Router

---

## ğŸ“‹ ç›®æ¬¡

- [ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¦‚è¦](#ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¦‚è¦)
- [ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£](#ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£)
- [ãƒšãƒ¼ã‚¸ãƒ«ãƒ¼ãƒˆ](#ãƒšãƒ¼ã‚¸ãƒ«ãƒ¼ãƒˆ)
  - [å…¬é–‹ãƒšãƒ¼ã‚¸](#å…¬é–‹ãƒšãƒ¼ã‚¸)
  - [èªè¨¼ãŒå¿…è¦ãªãƒšãƒ¼ã‚¸](#èªè¨¼ãŒå¿…è¦ãªãƒšãƒ¼ã‚¸)
  - [ç®¡ç†è€…å°‚ç”¨ãƒšãƒ¼ã‚¸](#ç®¡ç†è€…å°‚ç”¨ãƒšãƒ¼ã‚¸)
- [APIãƒ«ãƒ¼ãƒˆ](#apiãƒ«ãƒ¼ãƒˆ)
  - [èªè¨¼API](#èªè¨¼api)
  - [äºˆç´„API](#äºˆç´„api)
  - [ç®¡ç†è€…äºˆç´„API](#ç®¡ç†è€…äºˆç´„api)
  - [ãƒ¡ãƒ‹ãƒ¥ãƒ¼API](#ãƒ¡ãƒ‹ãƒ¥ãƒ¼api)
  - [ã‚¹ã‚¿ãƒƒãƒ•API](#ã‚¹ã‚¿ãƒƒãƒ•api)
  - [ç®¡ç†è€…ã‚¹ã‚¿ãƒƒãƒ•API](#ç®¡ç†è€…ã‚¹ã‚¿ãƒƒãƒ•api)
  - [ç®¡ç†è€…çµ±è¨ˆAPI](#ç®¡ç†è€…çµ±è¨ˆapi)
  - [ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£API](#ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£api)
- [ãƒ«ãƒ¼ãƒˆå‘½åè¦å‰‡](#ãƒ«ãƒ¼ãƒˆå‘½åè¦å‰‡)
- [èªè¨¼ã¨ã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡](#èªè¨¼ã¨ã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡)
- [ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°](#ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°)

---

## ğŸ¯ ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¦‚è¦

ã“ã®ã‚·ã‚¹ãƒ†ãƒ ã¯ Next.js 16 ã® App Router ã‚’æ¡ç”¨ã—ã€ãƒ•ã‚¡ã‚¤ãƒ«ãƒ™ãƒ¼ã‚¹ã®ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã‚’ä½¿ç”¨ã—ã¦ã„ã¾ã™ã€‚

**æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯:**
- Next.js 16.1.1
- React 19.2.3
- TypeScript 5.x
- App Router (ãƒ•ã‚¡ã‚¤ãƒ«ãƒ™ãƒ¼ã‚¹ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°)

**ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°æ–¹å¼:**
- ãƒšãƒ¼ã‚¸ãƒ«ãƒ¼ãƒˆ: `page.tsx` ã«ã‚ˆã‚‹UIãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°
- APIãƒ«ãƒ¼ãƒˆ: `route.ts` ã«ã‚ˆã‚‹RESTful API
- å‹•çš„ãƒ«ãƒ¼ãƒˆ: `[id]` ãƒ•ã‚©ãƒ«ãƒ€ã«ã‚ˆã‚‹ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿å—ã‘å–ã‚Š
- ãƒ«ãƒ¼ãƒˆã‚°ãƒ«ãƒ¼ãƒ—: `(group)` ãƒ•ã‚©ãƒ«ãƒ€ã«ã‚ˆã‚‹è«–ç†çš„ãªã‚°ãƒ«ãƒ¼ãƒ—åŒ–ï¼ˆURLã«ã¯å½±éŸ¿ã—ãªã„ï¼‰

---

## ğŸ—ï¸ ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

### ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ 

```
src/app/
â”œâ”€â”€ page.tsx                              # / (ãƒ›ãƒ¼ãƒ )
â”œâ”€â”€ login/
â”‚   â””â”€â”€ page.tsx                          # /login (ãƒ­ã‚°ã‚¤ãƒ³)
â”œâ”€â”€ register/
â”‚   â””â”€â”€ page.tsx                          # /register (ãƒ¦ãƒ¼ã‚¶ãƒ¼ç™»éŒ²)
â”œâ”€â”€ menus/
â”‚   â””â”€â”€ page.tsx                          # /menus (ãƒ¡ãƒ‹ãƒ¥ãƒ¼ä¸€è¦§)
â”œâ”€â”€ booking/
â”‚   â””â”€â”€ page.tsx                          # /booking (äºˆç´„ä½œæˆ)
â”œâ”€â”€ my-reservations/
â”‚   â””â”€â”€ page.tsx                          # /my-reservations (ãƒã‚¤äºˆç´„)
â”œâ”€â”€ mypage/
â”‚   â””â”€â”€ page.tsx                          # /mypage (ãƒã‚¤ãƒšãƒ¼ã‚¸)
â”œâ”€â”€ admin/
â”‚   â”œâ”€â”€ dashboard/
â”‚   â”‚   â””â”€â”€ page.tsx                      # /admin/dashboard (ç®¡ç†è€…ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰)
â”‚   â”œâ”€â”€ reservations/
â”‚   â”‚   â””â”€â”€ page.tsx                      # /admin/reservations (äºˆç´„ç®¡ç†)
â”‚   â””â”€â”€ staff/
â”‚       â””â”€â”€ page.tsx                      # /admin/staff (ã‚¹ã‚¿ãƒƒãƒ•ç®¡ç†)
â””â”€â”€ api/
    â”œâ”€â”€ auth/
    â”‚   â”œâ”€â”€ register/route.ts             # POST /api/auth/register
    â”‚   â”œâ”€â”€ login/route.ts                # POST /api/auth/login
    â”‚   â””â”€â”€ logout/route.ts               # POST /api/auth/logout
    â”œâ”€â”€ reservations/
    â”‚   â”œâ”€â”€ route.ts                      # GET, POST /api/reservations
    â”‚   â””â”€â”€ [id]/route.ts                 # GET, PATCH, DELETE /api/reservations/:id
    â”œâ”€â”€ admin/
    â”‚   â”œâ”€â”€ reservations/
    â”‚   â”‚   â”œâ”€â”€ route.ts                  # GET, POST /api/admin/reservations
    â”‚   â”‚   â””â”€â”€ [id]/route.ts             # GET, PATCH, DELETE /api/admin/reservations/:id
    â”‚   â”œâ”€â”€ staff/
    â”‚   â”‚   â”œâ”€â”€ route.ts                  # GET, POST /api/admin/staff
    â”‚   â”‚   â””â”€â”€ [id]/
    â”‚   â”‚       â”œâ”€â”€ route.ts              # GET, PATCH, DELETE /api/admin/staff/:id
    â”‚   â”‚       â”œâ”€â”€ shifts/route.ts       # GET, POST /api/admin/staff/:id/shifts
    â”‚   â”‚       â””â”€â”€ vacations/route.ts    # GET, POST /api/admin/staff/:id/vacations
    â”‚   â””â”€â”€ stats/route.ts                # GET /api/admin/stats
    â”œâ”€â”€ menus/route.ts                    # GET, POST /api/menus
    â”œâ”€â”€ staff/route.ts                    # GET, POST /api/staff
    â”œâ”€â”€ available-slots/route.ts          # GET /api/available-slots
    â””â”€â”€ health/route.ts                   # GET /api/health
```

---

## ğŸ“„ ãƒšãƒ¼ã‚¸ãƒ«ãƒ¼ãƒˆ

### å…¬é–‹ãƒšãƒ¼ã‚¸

ã“ã‚Œã‚‰ã®ãƒšãƒ¼ã‚¸ã¯èªè¨¼ãªã—ã§ã‚¢ã‚¯ã‚»ã‚¹å¯èƒ½ã§ã™ã€‚

| ãƒ«ãƒ¼ãƒˆ | ãƒ•ã‚¡ã‚¤ãƒ« | èª¬æ˜ | ä¸»è¦æ©Ÿèƒ½ |
|--------|---------|------|----------|
| `/` | `app/page.tsx` | ãƒ›ãƒ¼ãƒ ãƒšãƒ¼ã‚¸ | ã‚·ã‚¹ãƒ†ãƒ ç´¹ä»‹ã€ãƒ¡ãƒ‹ãƒ¥ãƒ¼è¡¨ç¤ºã€äºˆç´„é–‹å§‹ãƒœã‚¿ãƒ³ |
| `/login` | `app/login/page.tsx` | ãƒ­ã‚°ã‚¤ãƒ³ | ãƒ¡ãƒ¼ãƒ«ãƒ»ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã§ãƒ­ã‚°ã‚¤ãƒ³ |
| `/register` | `app/register/page.tsx` | ãƒ¦ãƒ¼ã‚¶ãƒ¼ç™»éŒ² | æ–°è¦ã‚¢ã‚«ã‚¦ãƒ³ãƒˆä½œæˆ |
| `/menus` | `app/menus/page.tsx` | ãƒ¡ãƒ‹ãƒ¥ãƒ¼ä¸€è¦§ | æä¾›ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã®é–²è¦§ |

**èªè¨¼ãƒã‚§ãƒƒã‚¯:**
- ãƒ­ã‚°ã‚¤ãƒ³æ¸ˆã¿ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒ `/login` ã¾ãŸã¯ `/register` ã«ã‚¢ã‚¯ã‚»ã‚¹ã—ãŸå ´åˆã€ãƒ›ãƒ¼ãƒ ãƒšãƒ¼ã‚¸ã«ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆ

---

### èªè¨¼ãŒå¿…è¦ãªãƒšãƒ¼ã‚¸

ã“ã‚Œã‚‰ã®ãƒšãƒ¼ã‚¸ã¯ãƒ­ã‚°ã‚¤ãƒ³æ¸ˆã¿ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ã¿ã‚¢ã‚¯ã‚»ã‚¹å¯èƒ½ã§ã™ã€‚

| ãƒ«ãƒ¼ãƒˆ | ãƒ•ã‚¡ã‚¤ãƒ« | èª¬æ˜ | ä¸»è¦æ©Ÿèƒ½ |
|--------|---------|------|----------|
| `/booking` | `app/booking/page.tsx` | äºˆç´„ä½œæˆ | ãƒ¡ãƒ‹ãƒ¥ãƒ¼é¸æŠã€æ—¥æ™‚é¸æŠã€ã‚¹ã‚¿ãƒƒãƒ•é¸æŠã€äºˆç´„ç¢ºå®š |
| `/my-reservations` | `app/my-reservations/page.tsx` | ãƒã‚¤äºˆç´„ä¸€è¦§ | è‡ªåˆ†ã®äºˆç´„ã‚’è¡¨ç¤ºã€ã‚­ãƒ£ãƒ³ã‚»ãƒ«æ©Ÿèƒ½ |
| `/mypage` | `app/mypage/page.tsx` | ãƒã‚¤ãƒšãƒ¼ã‚¸ | ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«è¡¨ç¤ºãƒ»ç·¨é›† |

**èªè¨¼ãƒã‚§ãƒƒã‚¯:**
- æœªãƒ­ã‚°ã‚¤ãƒ³ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒã‚¢ã‚¯ã‚»ã‚¹ã—ãŸå ´åˆã€`/login` ã«ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆ

---

### ç®¡ç†è€…å°‚ç”¨ãƒšãƒ¼ã‚¸

ã“ã‚Œã‚‰ã®ãƒšãƒ¼ã‚¸ã¯ç®¡ç†è€…æ¨©é™ã‚’æŒã¤ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ã¿ã‚¢ã‚¯ã‚»ã‚¹å¯èƒ½ã§ã™ã€‚

| ãƒ«ãƒ¼ãƒˆ | ãƒ•ã‚¡ã‚¤ãƒ« | èª¬æ˜ | ä¸»è¦æ©Ÿèƒ½ |
|--------|---------|------|----------|
| `/admin/dashboard` | `app/admin/dashboard/page.tsx` | ç®¡ç†è€…ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ | çµ±è¨ˆæƒ…å ±è¡¨ç¤ºï¼ˆä»Šæ—¥ã®äºˆç´„ã€æœˆé–“å£²ä¸Šã€ãƒªãƒ”ãƒ¼ãƒˆç‡ãªã©ï¼‰ |
| `/admin/reservations` | `app/admin/reservations/page.tsx` | äºˆç´„ç®¡ç† | å…¨äºˆç´„ã®è¡¨ç¤ºãƒ»æ¤œç´¢ãƒ»ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ã€ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹å¤‰æ›´ |
| `/admin/staff` | `app/admin/staff/page.tsx` | ã‚¹ã‚¿ãƒƒãƒ•ç®¡ç† | ã‚¹ã‚¿ãƒƒãƒ•ã®è¿½åŠ ãƒ»ç·¨é›†ãƒ»å‰Šé™¤ã€ã‚·ãƒ•ãƒˆç®¡ç† |

**èªè¨¼ãƒã‚§ãƒƒã‚¯:**
- æœªãƒ­ã‚°ã‚¤ãƒ³ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒã‚¢ã‚¯ã‚»ã‚¹ã—ãŸå ´åˆã€`/login` ã«ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆ
- ä¸€èˆ¬ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒã‚¢ã‚¯ã‚»ã‚¹ã—ãŸå ´åˆã€ãƒ›ãƒ¼ãƒ ãƒšãƒ¼ã‚¸ã«ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆ

**ç®¡ç†è€…åˆ¤å®š:**
- `lib/auth.ts` ã® `isAdmin()` é–¢æ•°ã§åˆ¤å®š
- ç’°å¢ƒå¤‰æ•° `NEXT_PUBLIC_ADMIN_EMAILS` ã«ç™»éŒ²ã•ã‚ŒãŸãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ãŒç®¡ç†è€…

---

## ğŸ”Œ APIãƒ«ãƒ¼ãƒˆ

### èªè¨¼API

| ãƒ¡ã‚½ãƒƒãƒ‰ | ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ | èª¬æ˜ | ãƒªã‚¯ã‚¨ã‚¹ãƒˆ | ãƒ¬ã‚¹ãƒãƒ³ã‚¹ |
|---------|--------------|------|-----------|-----------|
| **POST** | `/api/auth/register` | ãƒ¦ãƒ¼ã‚¶ãƒ¼ç™»éŒ² | `{ name, email, phone, password, passwordConfirm, termsAccepted }` | `201: { id, name, email }` |
| **POST** | `/api/auth/login` | ãƒ­ã‚°ã‚¤ãƒ³ | `{ email, password, remember? }` | `200: { user: { id, name, email } }` |
| **POST** | `/api/auth/logout` | ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ | - | `200: { message }` |

**å®Ÿè£…ãƒ•ã‚¡ã‚¤ãƒ«:**
- `app/api/auth/register/route.ts`
- `app/api/auth/login/route.ts`
- `app/api/auth/logout/route.ts`

**èªè¨¼æ–¹å¼:**
- Supabase Auth ã‚’ä½¿ç”¨
- Cookie ãƒ™ãƒ¼ã‚¹ã®ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†

---

### äºˆç´„API

ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒè‡ªåˆ†ã®äºˆç´„ã‚’ç®¡ç†ã™ã‚‹ãŸã‚ã®APIã€‚

| ãƒ¡ã‚½ãƒƒãƒ‰ | ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ | èªè¨¼ | èª¬æ˜ |
|---------|--------------|------|------|
| **GET** | `/api/reservations` | å¿…é ˆ | è‡ªåˆ†ã®äºˆç´„ä¸€è¦§å–å¾— |
| **POST** | `/api/reservations` | å¿…é ˆ | æ–°è¦äºˆç´„ä½œæˆ |
| **GET** | `/api/reservations/:id` | å¿…é ˆ | äºˆç´„è©³ç´°å–å¾— |
| **PATCH** | `/api/reservations/:id` | å¿…é ˆ | äºˆç´„å†…å®¹å¤‰æ›´ |
| **DELETE** | `/api/reservations/:id` | å¿…é ˆ | äºˆç´„ã‚­ãƒ£ãƒ³ã‚»ãƒ« |

**å®Ÿè£…ãƒ•ã‚¡ã‚¤ãƒ«:**
- `app/api/reservations/route.ts` (GET, POST)
- `app/api/reservations/[id]/route.ts` (GET, PATCH, DELETE)

**ã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡:**
- è‡ªåˆ†ã®äºˆç´„ã®ã¿å–å¾—ãƒ»å¤‰æ›´ãƒ»å‰Šé™¤å¯èƒ½ï¼ˆ`userId` ã§ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ï¼‰

---

### ç®¡ç†è€…äºˆç´„API

ç®¡ç†è€…ãŒå…¨ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®äºˆç´„ã‚’ç®¡ç†ã™ã‚‹ãŸã‚ã®APIã€‚

| ãƒ¡ã‚½ãƒƒãƒ‰ | ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ | èªè¨¼ | èª¬æ˜ |
|---------|--------------|------|------|
| **GET** | `/api/admin/reservations` | ç®¡ç†è€… | å…¨äºˆç´„å–å¾—ï¼ˆãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ãƒ»æ¤œç´¢æ©Ÿèƒ½ä»˜ãï¼‰ |
| **POST** | `/api/admin/reservations` | ç®¡ç†è€… | äºˆç´„ä»£è¡Œä½œæˆ |
| **GET** | `/api/admin/reservations/:id` | ç®¡ç†è€… | äºˆç´„è©³ç´°å–å¾— |
| **PATCH** | `/api/admin/reservations/:id` | ç®¡ç†è€… | äºˆç´„æƒ…å ±æ›´æ–°ï¼ˆã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹å¤‰æ›´å«ã‚€ï¼‰ |
| **DELETE** | `/api/admin/reservations/:id` | ç®¡ç†è€… | äºˆç´„å‰Šé™¤ |

**å®Ÿè£…ãƒ•ã‚¡ã‚¤ãƒ«:**
- `app/api/admin/reservations/route.ts` (GET, POST)
- `app/api/admin/reservations/[id]/route.ts` (GET, PATCH, DELETE)

**ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ã‚ªãƒ—ã‚·ãƒ§ãƒ³ (GET):**
- `status`: äºˆç´„ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ ('all', 'PENDING', 'CONFIRMED', 'CANCELLED', 'COMPLETED', 'NO_SHOW')
- `dateRange`: æ—¥ä»˜ç¯„å›² ('all', 'this-week', 'this-month')
- `search`: é¡§å®¢åã§æ¤œç´¢

---

### ãƒ¡ãƒ‹ãƒ¥ãƒ¼API

| ãƒ¡ã‚½ãƒƒãƒ‰ | ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ | èªè¨¼ | èª¬æ˜ |
|---------|--------------|------|------|
| **GET** | `/api/menus` | ä¸è¦ | ãƒ¡ãƒ‹ãƒ¥ãƒ¼ä¸€è¦§å–å¾— |
| **POST** | `/api/menus` | ç®¡ç†è€… | ãƒ¡ãƒ‹ãƒ¥ãƒ¼ä½œæˆ |

**å®Ÿè£…ãƒ•ã‚¡ã‚¤ãƒ«:**
- `app/api/menus/route.ts`

---

### ã‚¹ã‚¿ãƒƒãƒ•API

| ãƒ¡ã‚½ãƒƒãƒ‰ | ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ | èªè¨¼ | èª¬æ˜ |
|---------|--------------|------|------|
| **GET** | `/api/staff` | ä¸è¦ | ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ãªã‚¹ã‚¿ãƒƒãƒ•ä¸€è¦§å–å¾— |
| **POST** | `/api/staff` | ç®¡ç†è€… | ã‚¹ã‚¿ãƒƒãƒ•ä½œæˆ |

**å®Ÿè£…ãƒ•ã‚¡ã‚¤ãƒ«:**
- `app/api/staff/route.ts`

---

### ç®¡ç†è€…ã‚¹ã‚¿ãƒƒãƒ•API

ç®¡ç†è€…ãŒã‚¹ã‚¿ãƒƒãƒ•æƒ…å ±ã‚’è©³ç´°ã«ç®¡ç†ã™ã‚‹ãŸã‚ã®APIã€‚

| ãƒ¡ã‚½ãƒƒãƒ‰ | ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ | èªè¨¼ | èª¬æ˜ |
|---------|--------------|------|------|
| **GET** | `/api/admin/staff` | ç®¡ç†è€… | ã‚¹ã‚¿ãƒƒãƒ•ä¸€è¦§å–å¾—ï¼ˆäºˆç´„ä»¶æ•°å«ã‚€ï¼‰ |
| **POST** | `/api/admin/staff` | ç®¡ç†è€… | ã‚¹ã‚¿ãƒƒãƒ•ä½œæˆ |
| **GET** | `/api/admin/staff/:id` | ç®¡ç†è€… | ã‚¹ã‚¿ãƒƒãƒ•è©³ç´°å–å¾— |
| **PATCH** | `/api/admin/staff/:id` | ç®¡ç†è€… | ã‚¹ã‚¿ãƒƒãƒ•æƒ…å ±æ›´æ–° |
| **DELETE** | `/api/admin/staff/:id` | ç®¡ç†è€… | ã‚¹ã‚¿ãƒƒãƒ•å‰Šé™¤ï¼ˆè«–ç†å‰Šé™¤ï¼‰ |
| **GET** | `/api/admin/staff/:id/shifts` | ç®¡ç†è€… | ã‚¹ã‚¿ãƒƒãƒ•ã‚·ãƒ•ãƒˆå–å¾— |
| **POST** | `/api/admin/staff/:id/shifts` | ç®¡ç†è€… | ã‚¹ã‚¿ãƒƒãƒ•ã‚·ãƒ•ãƒˆä½œæˆ |
| **GET** | `/api/admin/staff/:id/vacations` | ç®¡ç†è€… | ã‚¹ã‚¿ãƒƒãƒ•ä¼‘æš‡å–å¾— |
| **POST** | `/api/admin/staff/:id/vacations` | ç®¡ç†è€… | ã‚¹ã‚¿ãƒƒãƒ•ä¼‘æš‡ç™»éŒ² |

**å®Ÿè£…ãƒ•ã‚¡ã‚¤ãƒ«:**
- `app/api/admin/staff/route.ts` (GET, POST)
- `app/api/admin/staff/[id]/route.ts` (GET, PATCH, DELETE)
- `app/api/admin/staff/[id]/shifts/route.ts` (GET, POST)
- `app/api/admin/staff/[id]/vacations/route.ts` (GET, POST)

---

### ç®¡ç†è€…çµ±è¨ˆAPI

| ãƒ¡ã‚½ãƒƒãƒ‰ | ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ | èªè¨¼ | èª¬æ˜ |
|---------|--------------|------|------|
| **GET** | `/api/admin/stats` | ç®¡ç†è€… | ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰çµ±è¨ˆæƒ…å ±å–å¾— |

**å®Ÿè£…ãƒ•ã‚¡ã‚¤ãƒ«:**
- `app/api/admin/stats/route.ts`

**ãƒ¬ã‚¹ãƒãƒ³ã‚¹å†…å®¹:**
- ä»Šæ—¥ã®äºˆç´„ä»¶æ•°
- æœˆé–“äºˆç´„ä»¶æ•°
- æœˆé–“å£²ä¸Š
- ãƒªãƒ”ãƒ¼ãƒˆç‡
- ä»Šæ—¥ã®äºˆç´„ä¸€è¦§
- éå»7æ—¥é–“ã®äºˆç´„æ¨ç§»

---

### ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£API

| ãƒ¡ã‚½ãƒƒãƒ‰ | ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ | èªè¨¼ | èª¬æ˜ |
|---------|--------------|------|------|
| **GET** | `/api/available-slots` | ä¸è¦ | ç©ºãæ™‚é–“ã‚¹ãƒ­ãƒƒãƒˆå–å¾— |
| **GET** | `/api/health` | ä¸è¦ | ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯ï¼ˆDBæ¥ç¶šç¢ºèªï¼‰ |

**å®Ÿè£…ãƒ•ã‚¡ã‚¤ãƒ«:**
- `app/api/available-slots/route.ts`
- `app/api/health/route.ts`

**available-slots ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿:**
- `date`: äºˆç´„æ—¥ (YYYY-MM-DD)
- `menuId`: ãƒ¡ãƒ‹ãƒ¥ãƒ¼ID (UUID)
- `staffId`: ã‚¹ã‚¿ãƒƒãƒ•ID (UUID, ã‚ªãƒ—ã‚·ãƒ§ãƒ³)

---

## ğŸ“ ãƒ«ãƒ¼ãƒˆå‘½åè¦å‰‡

### ãƒšãƒ¼ã‚¸ãƒ«ãƒ¼ãƒˆ

- **å˜æ•°å½¢**: `/booking`, `/mypage` (å˜ä¸€ãƒªã‚½ãƒ¼ã‚¹ã¾ãŸã¯ã‚¢ã‚¯ã‚·ãƒ§ãƒ³)
- **è¤‡æ•°å½¢**: `/menus`, `/my-reservations` (è¤‡æ•°ãƒªã‚½ãƒ¼ã‚¹ã®ä¸€è¦§)
- **å‹•è©**: `/login`, `/register` (ã‚¢ã‚¯ã‚·ãƒ§ãƒ³)

### APIãƒ«ãƒ¼ãƒˆ

- **RESTfulåŸå‰‡ã«å¾“ã†**:
  - ãƒªã‚½ãƒ¼ã‚¹ã¯è¤‡æ•°å½¢: `/api/reservations`, `/api/menus`
  - å‹•çš„ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿: `[id]` ãƒ•ã‚©ãƒ«ãƒ€ã§è¡¨ç¾
  - ãƒã‚¹ãƒˆã•ã‚ŒãŸãƒªã‚½ãƒ¼ã‚¹: `/api/admin/staff/:id/shifts`

### ãƒ«ãƒ¼ãƒˆã‚°ãƒ«ãƒ¼ãƒ—

ç¾åœ¨ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã¯ãƒ«ãƒ¼ãƒˆã‚°ãƒ«ãƒ¼ãƒ— `(auth)`, `(booking)`, `(admin)` ã¯ä½¿ç”¨ã—ã¦ã„ã¾ã›ã‚“ã€‚
å°†æ¥çš„ã«ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã‚’åˆ†ã‘ãŸã„å ´åˆã¯ã€ä»¥ä¸‹ã®ã‚ˆã†ã«ä½¿ç”¨å¯èƒ½ã§ã™:

```
app/
â”œâ”€â”€ (auth)/
â”‚   â”œâ”€â”€ login/page.tsx           # /login
â”‚   â””â”€â”€ register/page.tsx        # /register
â”œâ”€â”€ (booking)/
â”‚   â”œâ”€â”€ menus/page.tsx           # /menus
â”‚   â””â”€â”€ booking/page.tsx         # /booking
â””â”€â”€ (admin)/
    â””â”€â”€ admin/
        â””â”€â”€ dashboard/page.tsx   # /admin/dashboard
```

ãƒ«ãƒ¼ãƒˆã‚°ãƒ«ãƒ¼ãƒ—ã¯URLã«ã¯å½±éŸ¿ã›ãšã€ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã®å…±æœ‰ã‚„ã‚³ãƒ¼ãƒ‰æ•´ç†ã«åˆ©ç”¨ã•ã‚Œã¾ã™ã€‚

---

## ğŸ” èªè¨¼ã¨ã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡

### èªè¨¼ãƒ¬ãƒ™ãƒ«

| ãƒ¬ãƒ™ãƒ« | èª¬æ˜ | å®Ÿè£…æ–¹æ³• |
|-------|------|----------|
| **å…¬é–‹** | èª°ã§ã‚‚ã‚¢ã‚¯ã‚»ã‚¹å¯èƒ½ | ã‚¢ã‚¯ã‚»ã‚¹åˆ¶é™ãªã— |
| **èªè¨¼å¿…é ˆ** | ãƒ­ã‚°ã‚¤ãƒ³ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ã¿ | `requireAuth()` ã§èªè¨¼ãƒã‚§ãƒƒã‚¯ |
| **ç®¡ç†è€…ã®ã¿** | ç®¡ç†è€…æ¨©é™ãŒå¿…è¦ | `requireAdmin()` ã§ç®¡ç†è€…ãƒã‚§ãƒƒã‚¯ |

### å®Ÿè£…ä¾‹

**ãƒšãƒ¼ã‚¸ã§ã®èªè¨¼ãƒã‚§ãƒƒã‚¯ (app/booking/page.tsx):**

```typescript
import { requireAuth } from '@/lib/auth';

export default async function BookingPage() {
  const user = await requireAuth();

  return <BookingForm user={user} />;
}
```

**APIã§ã®èªè¨¼ãƒã‚§ãƒƒã‚¯ (app/api/reservations/route.ts):**

```typescript
import { getCurrentUser } from '@/lib/auth';

export async function GET(request: Request) {
  const user = await getCurrentUser();

  if (!user) {
    return errorResponse('Unauthorized', 401, 'UNAUTHORIZED');
  }

  // ...
}
```

**ç®¡ç†è€…ãƒã‚§ãƒƒã‚¯ (app/api/admin/stats/route.ts):**

```typescript
import { requireAdmin } from '@/lib/auth';

export async function GET(request: Request) {
  await requireAdmin();

  // ç®¡ç†è€…ã®ã¿å®Ÿè¡Œå¯èƒ½ãªå‡¦ç†
}
```

---

## ğŸš¨ ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°

### ãƒšãƒ¼ã‚¸ãƒ«ãƒ¼ãƒˆã®ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°

- **èªè¨¼ã‚¨ãƒ©ãƒ¼**: `/login` ã«ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆ
- **æ¨©é™ã‚¨ãƒ©ãƒ¼**: ãƒ›ãƒ¼ãƒ ãƒšãƒ¼ã‚¸ã«ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆ
- **ãã®ä»–ã®ã‚¨ãƒ©ãƒ¼**: ã‚¨ãƒ©ãƒ¼ãƒšãƒ¼ã‚¸è¡¨ç¤º

### APIãƒ«ãƒ¼ãƒˆã®ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°

çµ±ä¸€ã•ã‚ŒãŸã‚¨ãƒ©ãƒ¼ãƒ¬ã‚¹ãƒãƒ³ã‚¹å½¢å¼ã‚’ä½¿ç”¨:

```typescript
{
  "error": "Error message",
  "code": "ERROR_CODE",
  "statusCode": 400
}
```

**ä¸»ãªã‚¨ãƒ©ãƒ¼ã‚³ãƒ¼ãƒ‰:**
- `UNAUTHORIZED` (401): èªè¨¼ã‚¨ãƒ©ãƒ¼
- `FORBIDDEN` (403): æ¨©é™ã‚¨ãƒ©ãƒ¼
- `NOT_FOUND` (404): ãƒªã‚½ãƒ¼ã‚¹ãŒå­˜åœ¨ã—ãªã„
- `VALIDATION_ERROR` (400): ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚¨ãƒ©ãƒ¼
- `CONFLICT` (409): ãƒªã‚½ãƒ¼ã‚¹ã®ç«¶åˆ
- `INTERNAL_ERROR` (500): ã‚µãƒ¼ãƒãƒ¼ã‚¨ãƒ©ãƒ¼

**ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ãƒ˜ãƒ«ãƒ‘ãƒ¼:**
- `lib/api-response.ts` ã«çµ±ä¸€ã•ã‚ŒãŸãƒ¬ã‚¹ãƒãƒ³ã‚¹é–¢æ•°ã‚’å®Ÿè£…
  - `successResponse(data, status)`
  - `errorResponse(message, status, code, details?)`

---

## ğŸ“Š ãƒ«ãƒ¼ãƒˆä¸€è¦§ã‚µãƒãƒªãƒ¼

### ãƒšãƒ¼ã‚¸ãƒ«ãƒ¼ãƒˆ (10ä»¶)

| # | ãƒ«ãƒ¼ãƒˆ | èªè¨¼ | èª¬æ˜ |
|---|--------|------|------|
| 1 | `/` | ä¸è¦ | ãƒ›ãƒ¼ãƒ ãƒšãƒ¼ã‚¸ |
| 2 | `/login` | ä¸è¦ | ãƒ­ã‚°ã‚¤ãƒ³ |
| 3 | `/register` | ä¸è¦ | ãƒ¦ãƒ¼ã‚¶ãƒ¼ç™»éŒ² |
| 4 | `/menus` | ä¸è¦ | ãƒ¡ãƒ‹ãƒ¥ãƒ¼ä¸€è¦§ |
| 5 | `/booking` | å¿…é ˆ | äºˆç´„ä½œæˆ |
| 6 | `/my-reservations` | å¿…é ˆ | ãƒã‚¤äºˆç´„ |
| 7 | `/mypage` | å¿…é ˆ | ãƒã‚¤ãƒšãƒ¼ã‚¸ |
| 8 | `/admin/dashboard` | ç®¡ç†è€… | ç®¡ç†è€…ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ |
| 9 | `/admin/reservations` | ç®¡ç†è€… | äºˆç´„ç®¡ç† |
| 10 | `/admin/staff` | ç®¡ç†è€… | ã‚¹ã‚¿ãƒƒãƒ•ç®¡ç† |

### APIãƒ«ãƒ¼ãƒˆ (19ä»¶)

| # | ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ | ãƒ¡ã‚½ãƒƒãƒ‰ | èªè¨¼ | èª¬æ˜ |
|---|--------------|---------|------|------|
| 1 | `/api/auth/register` | POST | ä¸è¦ | ãƒ¦ãƒ¼ã‚¶ãƒ¼ç™»éŒ² |
| 2 | `/api/auth/login` | POST | ä¸è¦ | ãƒ­ã‚°ã‚¤ãƒ³ |
| 3 | `/api/auth/logout` | POST | ä¸è¦ | ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ |
| 4 | `/api/menus` | GET, POST | POST:ç®¡ç†è€… | ãƒ¡ãƒ‹ãƒ¥ãƒ¼ä¸€è¦§ãƒ»ä½œæˆ |
| 5 | `/api/staff` | GET, POST | POST:ç®¡ç†è€… | ã‚¹ã‚¿ãƒƒãƒ•ä¸€è¦§ãƒ»ä½œæˆ |
| 6 | `/api/reservations` | GET, POST | å¿…é ˆ | äºˆç´„ä¸€è¦§ãƒ»ä½œæˆ |
| 7 | `/api/reservations/:id` | GET, PATCH, DELETE | å¿…é ˆ | äºˆç´„è©³ç´°ãƒ»æ›´æ–°ãƒ»å‰Šé™¤ |
| 8 | `/api/admin/reservations` | GET, POST | ç®¡ç†è€… | å…¨äºˆç´„ä¸€è¦§ãƒ»ä½œæˆ |
| 9 | `/api/admin/reservations/:id` | GET, PATCH, DELETE | ç®¡ç†è€… | äºˆç´„è©³ç´°ãƒ»æ›´æ–°ãƒ»å‰Šé™¤ |
| 10 | `/api/admin/staff` | GET, POST | ç®¡ç†è€… | ã‚¹ã‚¿ãƒƒãƒ•ä¸€è¦§ãƒ»ä½œæˆ |
| 11 | `/api/admin/staff/:id` | GET, PATCH, DELETE | ç®¡ç†è€… | ã‚¹ã‚¿ãƒƒãƒ•è©³ç´°ãƒ»æ›´æ–°ãƒ»å‰Šé™¤ |
| 12 | `/api/admin/staff/:id/shifts` | GET, POST | ç®¡ç†è€… | ã‚·ãƒ•ãƒˆå–å¾—ãƒ»ä½œæˆ |
| 13 | `/api/admin/staff/:id/vacations` | GET, POST | ç®¡ç†è€… | ä¼‘æš‡å–å¾—ãƒ»ä½œæˆ |
| 14 | `/api/admin/stats` | GET | ç®¡ç†è€… | çµ±è¨ˆæƒ…å ±å–å¾— |
| 15 | `/api/available-slots` | GET | ä¸è¦ | ç©ºãæ™‚é–“å–å¾— |
| 16 | `/api/health` | GET | ä¸è¦ | ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯ |

**åˆè¨ˆ**: 29ãƒ«ãƒ¼ãƒˆï¼ˆãƒšãƒ¼ã‚¸10 + API19ï¼‰

---

## ğŸ“š é–¢é€£ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

- **APIè¨­è¨ˆæ›¸**: `documents/api/APIè¨­è¨ˆæ›¸.md`
- **ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¨­è¨ˆæ›¸**: `documents/spec/ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¨­è¨ˆæ›¸.md`
- **ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¦‚è¦**: `documents/basic/ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¦‚è¦.md`
- **æ©Ÿèƒ½ä¸€è¦§ã¨ãƒšãƒ¼ã‚¸è¨­è¨ˆ**: `documents/basic/æ©Ÿèƒ½ä¸€è¦§ã¨ãƒšãƒ¼ã‚¸è¨­è¨ˆ.md`

---

**æœ€çµ‚æ›´æ–°**: 2026-01-01
**ç®¡ç†è€…**: Claude Code
